{% extends 'base.html' %}
{% block titulo %} siova: edit-{{objeto|capfirst}} {% endblock %}
{% block itemMenu %}
    {% if usuario.profile.rol = 'rdoc' %}
        <li><a class="menusbtn" href="/docente">Objetos</a></li>
    {% endif %}
{% endblock %}
{% block itemMenuUs %}
    <li><a class="menusubtn" href="/usuario">{{usuario.username|capfirst}}</a></li>
    <li><a class="menusubtn" href="/cerrar">Salir</a></li>
{% endblock %}
{% block itemNav %}
    <li><a href="/">Inicio</a></li>
    > <li><a href="/docente">Objetos</a></li>
{% endblock %}
{% block contenidoIzq %}
    <div class="titulo_item" id="tit_obj">
        <p>{{objeto|capfirst}}</p>
    </div>
{% endblock %}
{% block contenidoDer %}
	<div class="titulos" id="titulo">Modificar Objeto</div>
        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                <li>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
        {% if errores %}
                <p class="errores">Hay un errror con el formulario</p>
        {% endif%}
        {% if l_errores %}
            {% for err in l_errores %}
                <p class="errores">{{err}}</p>
            {% endfor %}
        {% endif%}
	<form id="formulario" method="post" enctype="multipart/form-data" action="">{% csrf_token %}	
		{{ formEsp.as_p }}
        {{ formObj.as_p }}
        <div id = "camposAutores">
            <p>
                Nombres<br><input id="au_name" type="text" size="10"/>
            </p>
            <p>
               Apellidos<br><input id="au_last" type="text" size="10"/>
            </p>
            <p>
                Rol *<br><input id="au_rol" value="Autor" type="text" size="8"/>
            </p>
            <p>
                <div class="btn_peq" id="btn_agr">+</div>
            </p>
            <ul id="autores">
                {% for a in autores %}
                    <script>
                        var autores_arr=[];
                        var a = '{{a.nombres}} {{a.apellidos}} {{a.rol}}';
                        autores_arr.push(a);
                        $("#autores").append('<li id="autors{{a.nombres}}_{{a.apellidos}}_{{a.rol}}"><span id="sp1">{{a.nombres}} {{a.apellidos}} - {{a.rol}}</span></li>');
                        $("#autores li").last().append(function() {
                            return $('<span class="btn_peq" id="{{a.nombres}}_{{a.apellidos}}_{{a.rol}}">&nbsp-&nbsp</span>').click(function() {
                                var e=$(this).context.id;
                                s=e.replace(/_/g,' ');
                                autores_arr.splice(jQuery.inArray(s,autores_arr),1);
                                $("#autors"+e).remove();
                            });
                        });
                    </script>
                {% endfor %}
            </ul>
            <p id="error"></p>
            <input id="autores1" name="autores1" type="hidden"/>
        </div>
		<p class="btnInferior"><input class="descarga" id="crearObj" type="submit" value="Guardar Cambios"/></p>
	</form>
	<span id="cargando"><img src="{{STATIC_URL}}img/temp.png"/></span>
{% endblock %}